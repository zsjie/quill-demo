# 对标题的识别

标题也是一种基础格式，markdown 通常最多支持六级标题，与 HTML 中的 h1-h6 标签对应。

## markdown 中的 标题规则：

```javascript
let heading = /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/
```

1. 从字符串输入开始的位置进行匹配
2. `#` 符号是标题开始的标记，`#` 之前可以有任意个空格，之后也可以有任意个空格
3. `#` 可以出现 1~6次，对应 1~6 级标题
4. 标题内容中不能包含换行符 `\n`，即标题中不能换行
5. 标题内容中可以包含任意个 `#` 符号，这些 `#` 符号前后无论是否有空格，都不会被识别为另外一个标题，即标题不能包含标题
6. 标题结束的标志是一个或多个换行符或者字符输入结束

为了保留标题后面的空行，我们要正则改为下面这样，主要是对第六条规则进行修改--标题结束的标志是一个换行符或者字符输入结束

```javascript
let heading = /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n|$)/
```

## 标题的 Delta

如果标题中没有任何行内格式，那么标题的 Delta 对象也是很简单：

```javascript
let delta = new Delta()
  .insert('h1')
  .insert('\n', { header: 1 }) 
  // ops: [ { insert: 'h1' }, { insert: '\n', attributes: { header: 1 } ] }
```

## 标题的 token

以字符串 `# h1` 为例：

```javascript
let tokens = Lexer.lex('# h1') // [{"type":"heading","depth":1,"text":"h1"}]
```
